# Markdown Viewer ヘルプ

---

## はじめに

1. `Ctrl+O` でフォルダを開く
2. 左パネルのファイルツリーから `.md` ファイルをクリック
3. 右側にプレビューが表示される

これだけで使い始められます。以下は、もっと便利に使うための機能ガイドです。

---

## 検索する

### フォルダ内の全文検索

左パネルの検索ボックスにキーワードを入力して `Enter`。フォルダ内の全ファイルを横断検索します。

検索結果をクリックすると、該当ファイルの該当行が開き、以下のようにハイライトされます：
- 該当行が **黄色でフラッシュ**（2秒間）
- 検索キーワードが **赤色で強調表示**

### 現在のファイル内を検索する

検索ボックスの上にある **「全ファイル / このファイル」** トグルを切り替えると、現在開いているファイル内だけを検索できます。ファイルが開かれていないときは無効になります。

### 検索オプション

| ボタン | 機能 | 使いどころ |
|--------|------|-----------|
| `Aa` | 大文字小文字を区別 | `Config` と `config` を分けたいとき |
| `.*` | 正規表現 | `\d{4}-\d{2}-\d{2}` で日付を検索、など |
| `📄` | ファイル名検索 | 内容ではなくファイル名から探したいとき |

### 複数キーワード（AND / OR）

スペース区切りで複数キーワードを入力できます。

- **AND**: `python import` → 両方を含む行にマッチ
- **OR**: `TODO FIXME` → どちらかを含む行にマッチ

検索ボックス横のボタンで AND/OR を切り替えられます。

### 検索結果をエクスポート

検索結果画面の右上にある **「📋 Export」** ボタンで、結果を Markdown 形式でクリップボードにコピーできます。コードレビューや報告書の引用に便利です。

### 検索履歴

直近 5 件の検索を保持しています。検索ボックスをクリックすると履歴が表示されます。

---

## ファイルを探す・開く

### ファイルツリー

フォルダを開くと、左パネルにファイルツリーが表示されます。上部のドロップダウンで表示対象をフィルタリングできます：

| フィルター | 表示対象 |
|-----------|---------|
| **Markdown only** | `.md`, `.markdown` のみ |
| **All supported** | Markdown + XML, Python, CSV, CDXML |
| **All files** | すべてのファイル |

### ブックマーク

よく使うファイルをブックマークに登録できます。

- `Ctrl+B` で現在のファイルをブックマーク登録/解除
- 左パネルの「⭐」ボタンでブックマーク一覧を表示
- 一覧は最終アクセス日時の新しい順

### 最近開いたファイル

直近 10 件の開いたファイルを自動追跡します。

- `Ctrl+H` または左パネルの「⏱」ボタンで一覧表示
- ファイルツリー、検索結果、ブックマークのどこから開いても記録される

### ツールバーの履歴リンク

ツールバー右側に、直近 5 件のファイルがリンクとして表示されます。ワンクリックでファイルを開き直せます。

---

## 読む・ナビゲートする

### アウトライン（目次）

`Ctrl+Shift+O` でアウトラインパネルの表示/非表示を切り替えます。見出し（H1〜H6）の構造がツリー表示され、クリックでジャンプできます。

### リンクナビゲーション

Markdown 内のリンクはクリックで動作します：

| リンクの種類 | 動作 |
|-------------|------|
| 相対パス (`./other.md`) | そのファイルを開く |
| アンカー (`#見出し`) | 同一ファイル内の見出しにジャンプ |
| 外部 URL (`https://...`) | システムのブラウザで開く |

### 戻る

`ESC` キーで前の画面に戻れます（検索結果一覧→元のファイル、ブックマーク一覧→元のファイル、など）。ナビゲーション履歴がスタックとして管理されています。

### ズーム

| 操作 | 効果 |
|------|------|
| `Ctrl++` / `Ctrl+=` | ズームイン |
| `Ctrl+-` | ズームアウト |
| `Ctrl+0` | リセット（100%） |

倍率は 0.3x〜3.0x の範囲です。

### 行番号ガター

Markdown ファイルの表示時、左側に行番号が表示されます。

- **行番号をクリック**: その行の Markdown ソース（ファイルパス付き）をクリップボードにコピー
- **Shift+クリック**: 起点行から範囲選択してコピー

コードレビューやドキュメント引用に便利です。

### 再読み込み

`F5` でファイルを再読み込みします。スクロール位置は保持されます。

### 外部変更の自動検知

別のエディタでファイルを編集すると、自動的に再読み込みされます。スクロール位置も保持されます。

---

## ワークスペースを管理する

### タブ

| 操作 | 方法 |
|------|------|
| タブ追加 | 「📂 Open Folder」でフォルダを開くと自動的に新しいタブで開きます |
| タブ切り替え | `Ctrl+Tab` / `Ctrl+Shift+Tab`、またはタブをクリック |
| タブ並べ替え | タブをドラッグ＆ドロップ |
| タブを閉じる | `Ctrl+W` またはタブの「✖」ボタン |

各タブは独立したフォルダ・ファイル状態を持ちます。

### サイドバー・パネルの表示切替

| ショートカット | 対象 |
|--------------|------|
| `Ctrl+Shift+L` | 左サイドバー全体 |
| `Ctrl+Shift+O` | アウトライン（右パネル） |
| `Ctrl+Shift+I` | ファイルインスペクター |

### ファイルインスペクター

左パネル下部に、現在開いているファイルの詳細情報が表示されます。各セクションはクリックで折りたたみ/展開できます。

**ファイル情報**:
- ファイルパス、サイズ、更新日時

**統計情報**:

| 項目 | 説明 |
|------|------|
| Lines | 行数 |
| Chars | 文字数 |
| Words | 単語数 |
| Read time | 推定読了時間 |
| H1〜H6 | 各レベルの見出し数 |
| Code | コードブロック数 |
| Links | リンク数 |
| Images | 画像数 |

### セッション管理

アプリ終了時に以下の状態が自動保存され、次回起動時に復元されます：

- ウィンドウ位置・サイズ
- 開いているタブとフォルダ
- 各タブで選択中のファイル
- ファイルフィルター設定
- 最近開いたファイル
- ブックマーク
- 検索履歴

保存先: `~/.markdown-viewer/` (`session.json`, `bookmarks.json`)

---

## キーボードショートカット一覧

### ファイル操作

| ショートカット | 機能 |
|--------------|------|
| `Ctrl+O` | フォルダを開く |
| `Ctrl+W` | タブを閉じる |
| `Ctrl+Tab` | 次のタブ |
| `Ctrl+Shift+Tab` | 前のタブ |
| `F5` | 再読み込み（スクロール位置保持） |

### 検索・ナビゲーション

| ショートカット | 機能 |
|--------------|------|
| `Ctrl+F` | 検索ボックスにフォーカス |
| `Ctrl+B` | ブックマーク登録/解除 |
| `Ctrl+H` | 最近開いたファイル一覧 |
| `ESC` | 戻る |

### 表示

| ショートカット | 機能 |
|--------------|------|
| `Ctrl+Shift+L` | サイドバー表示切替 |
| `Ctrl+Shift+O` | アウトライン表示切替 |
| `Ctrl+Shift+I` | インスペクター表示切替 |
| `Ctrl++` / `Ctrl+=` | ズームイン |
| `Ctrl+-` | ズームアウト |
| `Ctrl+0` | ズームリセット |
| `F1` | ヘルプを表示 |

---

## 対応ファイル形式

### Markdown (`.md`, `.markdown`)

GFM (GitHub Flavored Markdown) に準拠：
見出し、太字、斜体、打ち消し線、リンク、画像、コードブロック（シンタックスハイライト付き）、テーブル、リスト、タスクリスト、引用、水平線

### Mermaid 図表

コードブロックの言語指定に `mermaid` を書くと図表として描画されます：

```
graph TD
    A[開始] --> B{条件}
    B -->|Yes| C[処理A]
    B -->|No| D[処理B]
```

対応する図表タイプ:
フローチャート (`graph`)、シーケンス図 (`sequenceDiagram`)、クラス図 (`classDiagram`)、状態図 (`stateDiagram-v2`)、ER図 (`erDiagram`)、円グラフ (`pie`)、ガントチャート (`gantt`)

### その他

| 形式 | 拡張子 | 表示方法 |
|------|--------|---------|
| XML | `.xml`, `.xsl`, `.xslt`, `.xsd`, `.svg` | シンタックスハイライト |
| Python | `.py`, `.pyw` | シンタックスハイライト |
| CSV | `.csv` | テーブル形式 |
| CDXML | `.cdxml` | 化学構造図（SVG 変換） |

---

## トラブルシューティング

### 日本語が文字化けする

ファイルが **UTF-8** であることを確認してください。Shift-JIS 等の他のエンコーディングには対応していません。

### Mermaid 図表が表示されない

- コードブロックの言語指定が ` ```mermaid ` になっているか確認
- Mermaid の構文エラーがあると図が描画されません。小さい図から試してみてください

### 検索結果が出ない

- フォルダが開かれているか確認（ファイルツリーに表示があるか）
- ファイルフィルターが適切か確認（「Markdown only」だと `.py` や `.xml` は検索対象外）
- 「このファイル」スコープになっていないか確認

### ブックマークが消えた

`~/.markdown-viewer/bookmarks.json` が破損している可能性があります。このファイルを削除すると、空の状態から再スタートできます。

### アプリが前回の状態で起動しない

`~/.markdown-viewer/session.json` を削除すると、初期状態から起動します。

### ファイルの自動リロードが効かない

ファイルシステムの監視機能を使用しています。ネットワークドライブ上のファイルでは動作しない場合があります。`F5` で手動リロードしてください。

---

## バージョン情報

ウィンドウタイトルバーに表示されます（例: `Markdown Viewer v1.1 [Python]`）。

---

**最終更新**: 2026-02-07
